USE peer2peer;
 
DROP TABLE IF EXISTS AUTHORITIES;
DROP TABLE IF EXISTS peer2peer.USER;
DROP TABLE IF EXISTS LOG;
DROP TABLE IF EXISTS `library`;

-- LIBRARY TABLE
CREATE TABLE IF NOT EXISTS peer2peer.LIBRARY` (
  `id` 				INT AUTO_INCREMENT UNIQUE NOT NULL, 
  `lib_name` 		varchar(100) NOT NULL,
  `lib_creator` 	varchar(60) NOT NULL,
  `lib_create_dt` 	date NOT NULL,
  `lib_filename`  	varchar(40) NOT NULL,
  `lib_description` text NOT NULL,
  PRIMARY KEY (`id`)
) ;


-- USER TABLE
CREATE TABLE IF NOT EXISTS peer2peer.USER (
    IDUSER 		INT AUTO_INCREMENT UNIQUE NOT NULL,  
    USERNAME 	VARCHAR(255) NOT NULL PRIMARY KEY,
    PASSWORD  	VARCHAR(255) NOT NULL,
    ENABLED 	BOOLEAN NOT NULL
);


--  TABLE
CREATE TABLE IF NOT EXISTS peer2peer.AUTHORITIES(
      USERNAME VARCHAR(255) NOT NULL,
      AUTHORITY VARCHAR(255) NOT NULL,
      CONSTRAINT FK_AUTHORITIES_USER FOREIGN KEY(USERNAME) REFERENCES USER(USERNAME));
;

-- LOG TABLE
CREATE TABLE IF NOT EXISTS peer2peer.LOG (
	IDLOG 		INT AUTO_INCREMENT UNIQUE NOT NULL, /* GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,*/
    LOGSTRING 	VARCHAR(1000) NULL,
    PRIMARY KEY (IDLOG)
);

-- TEST TABLE
CREATE TABLE IF NOT EXISTS peer2peer.TEST (
	IDTEST INT AUTO_INCREMENT UNIQUE NOT NULL,
    TESTCOLUMN VARCHAR(1000) NULL,
    PRIMARY KEY (IDTEST)
);



